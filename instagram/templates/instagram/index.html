{% extends 'base.html' %}
{% load static %}

{% block head %}
{% include 'base_instagram.html' %}
<script defer src="{% static 'js/toggle.js' %}"></script>
{% endblock head %}

{% block body %}
<header>
    {% include 'base_header.html' %}
</header>
<main class="instagram-main">
    <div id="feed">
        <article class="follow-wrapper" id="follower">
            {% for follower in user.follower.all %}
            {{ follower.following }}
            {% endfor %}
        </article>
        <br>
        <article>
            {% for post in posts %}
            <section class="post-wrapper">
                <section class="post-top">
                    <div class="post-user feed-post">
                        <div class="image-box">
                            <a href="{% url 'instagram:user_detail' username=post.author %}">
                                <img src="{{ post.author.user_image.image.url }}" alt="" class="profile-image"></a>
                        </div>
                        <a href="{% url 'instagram:user_detail' username=post.author %}"
                            class="user-href">{{ post.author }}</a>
                    </div>
                    <div class="post-btn">
                        <img src="{% static 'image/horiz.png' %}">
                    </div>
                </section>
                <section class="post-mid">
                    <a href="{% url 'instagram:post_detail' pk=post.pk %}"><img src="{{ post.main_image.url }}"
                            class="post-image"></a>
                </section>
                <section class="post-bot feed-post">
                    <div class="post-like">좋아요 {{ post.like_set.all|length }}개</div>
                    <div>
                        {% for comment in post.comment_set.all|slice:":3" %}
                        <div class="post-comment">
                            <span class="comment-author"><a
                                    href="{% url 'instagram:user_detail' username=comment.author %}"
                                    class="user-href">{{ comment.author }}</a></span>
                            <span class="comment-text">{{ comment.text }}</span>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="post-create-date">{{ post.create_date }}</div>
                </section>
            </section>
            <br>
            {% endfor %}
        </article>
    </div>
</main>
<aside>
    <a href="{% url 'instagram:user_detail' username=user.username %}">{{ user.username}}</a>
    {% for message in messages %}
    {{ message.tags }}
    {{ message.message }}
    {% endfor %}
</aside>
{% comment %} <article class="post-manage-view">
    <div class="background-div"></div>
    <div class="post-manage-btns">
        <button class="post-manage-unfollow"><b>팔로우 취소</b></button>
        <button class="post-manage-gotopost">게시물로 이동</button>
        <button class="post-manage-update"><b>수정</b></button>
        <button class="post-manage-delete"><b>삭제</b></button>
        <button class="post-manage-copylink">링크 복사</button>
        <button class="post-manage-cancle">취소</button>
    </div>
</article> {% endcomment %}

{% endblock body %}